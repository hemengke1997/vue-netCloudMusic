{"version":3,"file":"21.js","sources":["webpack:///./src/views/sheetdetails/SheetDetails.vue?5c4d","webpack:///./src/views/sheetdetails/SheetDetails.vue?9ddb","webpack:///./src/views/sheetdetails/SheetDetails.vue?d290","webpack:///./src/views/sheetdetails/SheetDetails.vue?abe9","webpack:///./src/api/recommend-api.js","webpack:///./src/views/sheetdetails/SheetDetails.vue","webpack:///./src/views/sheetdetails/SheetDetails.vue?66d6","webpack:///./src/views/sheetdetails/SheetDetails.vue?53d2","webpack:///./src/views/sheetdetails/SheetDetails.vue?3ec1"],"sourcesContent":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MusicList from \"@/components/Musiclist\";\nimport CollectSheet from \"public/CollectSheet\";\nimport PAhead from \"@/components/playlist&album/PAhead\";\nimport DetailDes from \"@/components/playlist&album/DetailDes\";\nimport { getSheetDetails } from \"@/api/recommend-api\";\nimport { getComments } from \"@/api/comment-api\";\nimport { OK } from \"js/config\";\nimport Comment from \"@/components/comment/Comment\";\nimport Loading from \"public/Loading\";\nimport { Promise } from \"q\";\nexport default {\n  name: \"SheetDetails\",\n  data: function data() {\n    return {\n      playlist: {\n        description: \" \",\n        // 这里给了初始值的，不然的话子组件的updated钩子函数不会执行，不知道为什么\n        tags: []\n      },\n      tempSongs: [],\n      musicS: {\n        song: [],\n        red: false,\n        SQ: false,\n        rank: true\n      },\n      isLoading: true,\n      text: \"收藏歌单\",\n      comments: [],\n      // 最新评论\n      hotComments: [],\n      // 热门评论\n      commentOBJ: {} // 评论的总对象\n\n    };\n  },\n  components: {\n    MusicList: MusicList,\n    CollectSheet: CollectSheet,\n    Comment: Comment,\n    DetailDes: DetailDes,\n    Loading: Loading,\n    PAhead: PAhead\n  },\n  computed: {\n    id: function id() {\n      return this.$route.query.id;\n    },\n    songs: function songs() {\n      return this.tempSongs.map(function (item) {\n        return {\n          id: item.id,\n          name: item.name,\n          alias: item.alia,\n          ar: item.ar,\n          al: {\n            name: item.al.name,\n            id: item.al.id\n          },\n          copyright: item.copyright\n        };\n      });\n    },\n    des: function des() {\n      return {\n        coverImgUrl: this.playlist.coverImgUrl,\n        playCount: this.playlist.playCount,\n        highQuality: this.playlist.highQuality,\n        name: this.playlist.name,\n        creator: {\n          userId: this.playlist.creator.userId,\n          vipType: this.playlist.creator.vipType,\n          nickname: this.playlist.creator.nickname,\n          avatarUrl: this.playlist.creator.avatarUrl\n        },\n        tags: this.playlist.tags,\n        description: this.playlist.description\n      };\n    }\n  },\n  methods: {\n    _getSheetDetails: function _getSheetDetails(id) {\n      var _this = this;\n\n      getSheetDetails(id).then(function (res) {\n        if (res.status === OK) {\n          _this.playlist = res.data.playlist; // console.log(this.playlist)\n\n          _this.tempSongs = res.data.playlist.tracks;\n          _this.musicS.song = _this.songs;\n\n          var p1 = _this.$store.dispatch(\"playlist/setMusicList\", _this.musicS);\n\n          var p2 = _this.$store.dispatch(\"playlist/setPlaylist\", _this.playlist);\n\n          Promise.all([p1, p2, _this._getComments(_this.id)]).then(function () {\n            _this.isLoading = false;\n          });\n        }\n      });\n    },\n    _getComments: function _getComments(id) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        getComments(id).then(function (res) {\n          if (res.status === OK) {\n            _this2.commentOBJ = res.data;\n            _this2.comments = res.data.comments;\n            _this2.hotComments = res.data.hotComments;\n            resolve();\n          }\n        });\n      });\n    }\n  },\n  created: function created() {\n    this._getSheetDetails(this.id);\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    this._getSheetDetails(to.query.id);\n\n    next();\n  }\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"u-height\" },\n    [\n      _vm.isLoading ? _c(\"loading\") : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"root\" }, [\n        _c(\n          \"div\",\n          { staticClass: \"playlist u-paddlr u-paddbm\" },\n          [\n            _c(\"PAhead\", { attrs: { type: 1 } }),\n            _vm._v(\" \"),\n            _vm.playlist.description || _vm.playlist.tags.length\n              ? _c(\"detail-des\", { attrs: { type: 1 } })\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\"music-list\", { staticClass: \"music\" }, [\n              _c(\"h3\", { staticClass: \"list_title\" }, [_vm._v(\"歌曲列表\")])\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"sheet_comment\" },\n              [\n                _vm.hotComments.length\n                  ? [\n                      _c(\"h3\", { staticClass: \"hot_comment\" }, [\n                        _vm._v(\"精彩评论\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\"comment\", {\n                        attrs: { type: 1, commentOBJ: _vm.commentOBJ }\n                      })\n                    ]\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _vm.hotComments.length < 15 && _vm.comments.length\n                  ? [\n                      _c(\"h3\", { staticClass: \"new_comment\" }, [\n                        _vm._v(\"最新评论(\" + _vm._s(_vm.commentOBJ.total) + \")\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\"comment\", {\n                        attrs: { type: 2, commentOBJ: _vm.commentOBJ }\n                      })\n                    ]\n                  : _vm._e()\n              ],\n              2\n            ),\n            _vm._v(\" \"),\n            _c(\"collect-sheet\", { attrs: { text: _vm.text } })\n          ],\n          1\n        )\n      ])\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".highlight[data-v-6dd51336]{color:#507daf}[v-cloak][data-v-6dd51336]{display:none}.u-height[data-v-6dd51336]{height:100%;padding-bottom:env(safe-area-inset-bottom);-webkit-box-sizing:border-box;box-sizing:border-box}.u-height .root[data-v-6dd51336]{position:relative;background-color:#fcfcfd;height:100%}.u-height .root .playlist[data-v-6dd51336]{background-color:#f8f8f8;min-height:100%}.u-height .root .playlist .music .list_title[data-v-6dd51336]{height:23px;line-height:23px;padding:0 10px;font-size:12px;color:#666;background-color:#eeeff0}.u-height .root .playlist .sheet_comment .hot_comment[data-v-6dd51336],.u-height .root .playlist .sheet_comment .new_comment[data-v-6dd51336]{background-color:rgba(0,0,0,.05);padding:0 10px;height:23px;line-height:23px;margin:0;color:#666;font-size:12px;font-weight:400}.u-height .root .u-paddlr[data-v-6dd51336]{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}.u-height .root .u-paddbm[data-v-6dd51336]{padding-bottom:env(safe-area-inset-bottom)}\", \"\"]);\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"bba10706\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import axios from 'axios';\nimport { HOST } from 'js/config';\n\nfunction getSheetList() {\n  // 获取推荐歌单\n  var url = HOST + '/personalized';\n  return axios.get(url);\n}\n\nfunction getNewSong() {\n  // 最新音乐\n  var url = HOST + '/personalized/newsong';\n  return axios.get(url);\n}\n\nfunction getSheetDetails(id) {\n  var url = HOST + \"/playlist/detail?id=\".concat(id);\n  return axios.get(url);\n}\n\nexport { getSheetList, getNewSong, getSheetDetails };","import { render, staticRenderFns } from \"./SheetDetails.vue?vue&type=template&id=6dd51336&scoped=true&\"\nimport script from \"./SheetDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./SheetDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dd51336\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\github\\\\vue-first\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6dd51336')) {\n      api.createRecord('6dd51336', component.options)\n    } else {\n      api.reload('6dd51336', component.options)\n    }\n    module.hot.accept(\"./SheetDetails.vue?vue&type=template&id=6dd51336&scoped=true&\", function () {\n      api.rerender('6dd51336', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/sheetdetails/SheetDetails.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=style&index=0&id=6dd51336&lang=less&scoped=true&\"","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"b3604394-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SheetDetails.vue?vue&type=template&id=6dd51336&scoped=true&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3JA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnEA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}